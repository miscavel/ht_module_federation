events {}

http {
    include       mime.types;
    default_type  application/octet-stream;

    server {
        listen 80;

        # Core App (Host) - Served at Root
        location / {
            proxy_pass http://core_app:80;
            proxy_set_header Host $host;
        }

        # WMS App (Remote) - Served at /wms/
        location /wms/ {
            # Rewrite path: /wms/assets/... -> /assets/...
            rewrite ^/wms/(.*) /$1 break;
            proxy_pass http://wms_app:80;
            proxy_set_header Host $host;
        }

        # ASRS App (Remote) - Served at /asrs/
        location /asrs/ {
            # Rewrite path: /asrs/assets/... -> /assets/...
            rewrite ^/asrs/(.*) /$1 break;
            proxy_pass http://asrs_app:80;
            proxy_set_header Host $host;
        }
    }
}
